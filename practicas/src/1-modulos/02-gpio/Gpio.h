/*******************************************************************************************************************************//**
 *
 * @file		gpio.h
 * @brief		Breve descripción del objetivo del Módulo
 * @date		22 jun. 2022
 * @author		Ing. Marcelo Trujillo
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MODULO
 **********************************************************************************************************************************/

#ifndef GPIO_H_
#define GPIO_H_

/***********************************************************************************************************************************
 *** INCLUDES GLOBALES
 **********************************************************************************************************************************/
#include "Inputs.h"
#include "Outputs.h"
#include "LPC845.h"

/***********************************************************************************************************************************
 *** DEFINES GLOBALES
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MACROS GLOBALES
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPO DE DATOS GLOBALES
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** IMPLANTACION DE LA CLASE
 **********************************************************************************************************************************/
class Gpio : public Outputs ,  public Inputs
{
	protected:
		const 	uint8_t m_port ;
		const 	uint8_t m_bit ;
		const 	uint8_t m_modo ;
		const 	uint8_t m_actividad ;
				uint8_t m_direccion ;
				int8_t  m_error ;
	public:
		enum port_t			{ PORT0 , PORT1 };
		enum max_bits_port_t{ B_PORT0 = 31 , B_PORT1 = 31 };
		enum direction_t	{ INPUT , OUTPUT };
		enum power_t		{ OFF , ON };
		enum mode_output_t 	{ PUSHPULL , OPENCOLECTOR }; // el orden esta atado a las hojas de datos
		enum mode_input_t 	{ INACTIVE , PULLDOWN , PULLUP , REPEATER };
		enum activity_t		{ LOW ,	HIGH };
		enum error_t		{ ERROR = 2 , OK };

		Gpio ( uint8_t port , uint8_t bit , uint8_t mode , uint8_t activity , uint8_t direction );

		uint8_t SetPin ( void );
		uint8_t ClrPin ( void );
		uint8_t SetTogglePin ( void ) ;
		uint8_t SetDirInputs ( void )  ;
		uint8_t SetDirOutputs ( void )  ;
		uint8_t SetToggleDir ( void ) ;
		uint8_t GetPin ( void ) const ;
		uint8_t SetPinModeOut ( void )  ;
		uint8_t SetPinModeIn ( void ) ;
		Gpio& operator=( bool estado );
		bool operator== ( bool estado );
		bool operator== ( Gpio& );

		explicit operator bool( ) ;

		~Gpio (){};
};


#endif /* GPIO_H_ */
